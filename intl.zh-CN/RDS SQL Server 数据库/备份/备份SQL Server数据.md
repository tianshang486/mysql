# 备份SQL Server数据

您可以通过设置备份策略调整RDS数据备份和日志备份的周期来实现自动备份，也可以手动备份RDS数据。

## 注意事项

-   实例备份文件存储在独立的备份空间，不会占用实例本地磁盘空间。备份空间使用量超出免费的额度将会产生额外的费用，请合理设计备份周期，以满足业务需求的同时，兼顾备份空间的合理利用。关于免费额度详情，请参见[查看备份空间免费额度](/intl.zh-CN/RDS SQL Server 数据库/备份/查看备份空间免费额度.md)。
-   关于具体的计费方式与收费项，请参见[价格、收费项与计费方式](/intl.zh-CN/云数据库 RDS 价格/价格、收费项与计费方式.md)。
-   关于备份空间使用量的计费标准，请参见[云数据库 RDS 详细价格信息](https://www.alibabacloud.com/product/apsaradb-for-rds#pricing)。
-   备份期间不要执行DDL操作，避免锁表导致备份失败。
-   尽量选择业务低峰期进行备份。
-   若数据量较大，花费的时间可能较长，请耐心等待。
-   备份文件有保留时间，请及时下载需要保留的备份文件到本地。
-   暂不支持手动删除备份文件。

## 备份说明

|数据库类型|数据备份|日志备份|
|-----|----|----|
|SQL Server|-   支持全量物理备份和增量物理备份。目前不支持逻辑备份。
-   自动备份以全量备份-增量备份-增量备份为周期循环。
    -   如：星期一为全量备份，则星期二和星期三为增量备份，星期四为全量备份，星期五和星期六为增量备份，依次循环。
    -   如果备份周期循环期间执行过手动全量备份，则后续两次将自动执行增量备份。
-   支持单库备份，即可以指定对实例中的单个或多个数据库进行备份。
-   每次备份时SQL Server会收缩事务日志。用户可以在目标实例管理控制台上的备份恢复页面，单击**收缩事务日志**，手动收缩事务日志。

|-   系统自动生成日志备份（日志文件），您可以设置日志文件的生成频率。

    -   与数据备份频率一致
    -   每30分钟一次
两种频率下，最终生成的日志文件总大小一致。

-   日志备份功能无法关闭。
-   可以设置日志备份的保留时间，范围是7到730天。
-   可以下载日志文件。

**说明：** 当实例设置**日志备份频率**为**每30分钟**时，在极端情况下（如底层云盘彻底损坏或其它不可抗因素），SQL Server 基础版最多能恢复到最近30分钟日志备份的时间点。 |

## 设置备份策略实现自动备份

阿里云数据库会执行用户设定的备份策略，自动备份数据库。

1.  登录[RDS管理控制台](https://rds.console.aliyun.com/)。

2.  在左侧单击**实例列表**，然后在上方选择实例所在地域。

    ![选择地域](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3074469951/p36543.png)

3.  找到目标实例，单击实例ID。

4.  在左侧导航栏中单击**备份恢复**。

5.  在**备份恢复**页面中选择**备份设置**页签，单击**编辑**。

6.  设置如下参数，然后单击 **确定**。

    |参数|说明|
    |--|--|
    |**数据备份保留天数**|默认为7天，可以设置为 7~730 天。|
    |**备份周期**|可以设置为一星期中的某几天。 **说明：** 为了您的数据安全，一周至少需要备份两次。 |
    |**备份时间**|可以设置为任意时段，以小时为单位。|
    |**日志备份频率**|    -   与数据备份频率一致
    -   每30分钟一次
两种频率下，最终生成的日志文件总大小一致。 |
    |**日志备份保留**|与**数据备份保留天数**一致。|


## 手动备份

1.  登录[RDS管理控制台](https://rds.console.aliyun.com/)。

2.  在左侧单击**实例列表**，然后在上方选择实例所在地域。

    ![选择地域](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3074469951/p36543.png)

3.  找到目标实例，单击实例ID。

4.  单击页面右上角的**备份实例**，打开备份实例对话框。

5.  设置好备份方式、备份策略，单击**确定**。

    ![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/6468937061/p21680.png)

    **说明：** 如果是**全量备份** \> **单库备份**，请在左侧选择要备份的数据库，单击**\>**将要备份的数据库加入列表。若您还没有数据库，请先[创建数据库](/intl.zh-CN/RDS SQL Server 数据库/数据库/创建数据库.md)。

    ![单库备份](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/1013729951/p40346.png)

6.  在右上角**任务进度**列表查看任务进度，等待任务完成。

    ![查看任务进度](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/6468937061/p66932.png)

    **说明：** 备份完成后您可以在**备份恢复**页面下载备份文件。部分实例不支持下载备份，详情请参见[下载数据备份和日志备份](/intl.zh-CN/RDS SQL Server 数据库/备份/下载数据备份和日志备份.md)。


## 常见问题

1.  RDS SQL Server的数据备份是否可以关闭？

    答：不可以关闭。可以减少备份频率，一周至少2次。数据备份保留天数最少7天，最多730天。

2.  RDS SQL Server的日志备份是否可以关闭？

    答：不可以关闭。


## 相关API

|API|描述|
|---|--|
|[创建备份](/intl.zh-CN/API 参考/备份/创建备份.md)|创建RDS备份。|
|[查看备份列表](/intl.zh-CN/API 参考/备份/查看备份列表.md)|查看RDS备份列表。|
|[查询备份设置](/intl.zh-CN/API 参考/备份/查询备份设置.md)|查看RDS实例备份设置。|
|[修改备份设置](/intl.zh-CN/API 参考/备份/修改备份设置.md)|修改RDS实例备份设置。|
|[查询备份任务](/intl.zh-CN/API 参考/备份/查询备份任务.md)|查询RDS实例的备份任务列表。|
|[查询Binlog日志](/intl.zh-CN/API 参考/备份/查询Binlog日志.md)|查询RDS实例的Binlog文件。|

