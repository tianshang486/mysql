# 事务拆分

RDS的数据库独享代理提供事务拆分功能，能够将事务内写操作之前的读请求转发到只读实例，降低主实例负载。

实例已开通[数据库独享代理](/cn.zh-CN/RDS MySQL 数据库/数据库代理（读写分离）/数据库独享代理.md)。

默认情况下，RDS数据库独享代理会将事务内的所有请求都发送到主实例以保障事务的正确性，但是某些框架会将所有请求封装到非自动提交的事务中（通过`set autocommit=0;`关闭自动提交），导致主实例负载过大。此时您可以开启事务拆分功能。

开启事务拆分后，在默认的Read Commited隔离级别下，当RDS关闭事务自动提交后，仅会在发生写操作时才正式开启事务，正式开启事务前的读请求会通过负载均衡模块分流至只读实例。

**说明：**

-   显式事务（例如begin或者start transcation）暂时不支持拆分。
-   某些业务对全局一致性有要求，开启事务拆分后将不满足全局一致性，因此在开启事务拆分前请评估事务拆分功能是否适用于您的业务。

![事务拆分](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/6813729951/p98366.png)

## 操作步骤

1.  登录[RDS管理控制台](https://rds.console.aliyun.com/)。

2.  在左侧单击**实例列表**，然后在上方选择实例所在地域。

    ![选择地域](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3074469951/p36543.png)

3.  找到目标实例，单击实例ID。

4.  在左侧导航栏中单击**数据库代理**。

5.  选择**读写分离**页签，在**事务拆分**右侧单击**开通**。

    **说明：**

    -   不需要使用事务拆分时可以单击**事务拆分**右侧的**关闭**按钮进行关闭。
    -   开通或关闭事务拆分后仅对新连接生效。

