# 基础版升级为高可用版

您可以将SQL Server的基础版实例升级为高可用版实例，升级时可以同步升级版本。

[基础版](/cn.zh-CN/云数据库 RDS 简介/产品系列/基础版.md)实例没有备节点作为热备份，因此当实例意外宕机或者执行变更配置、版本升级等任务时，会出现较长时间的不可用。

[高可用版](/cn.zh-CN/云数据库 RDS 简介/产品系列/高可用版.md)实例有一个备实例，主备实例的数据会同步，当主实例出现故障无法访问时，会自动切换到备用实例。而且高可用版实例提供完整的产品功能，包括弹性伸缩、备份恢复、性能优化、读写分离等。

不同版本的功能差异请参见[各版本的功能差异](/cn.zh-CN/RDS SQL Server 数据库/快速入门/各版本的功能差异.md)。

## 费用说明

升级版本的费用请参见[变配](/cn.zh-CN/云数据库 RDS 价格/变配.md)。

## 影响

升级完成后，切换停机时间依实例大小不同有变化，一般20分钟内完成，建议选择维护时间段切换，并请确保应用具备重连机制。

## 前提条件

实例为基础版实例。

**说明：** 您可以在实例的**基本信息**页面查看实例所属的系列。

## 注意事项

-   版本或系列升级后无法回退到低版本或系列。

    **警告：** 由于升级后无法回退，建议您升级前先[创建按量付费的目标实例](/cn.zh-CN/RDS SQL Server 数据库/快速入门/创建RDS SQL Server实例.md)测试兼容性。

-   升级的规则如下表。

    |原版本/系列|可升级版本/系列|
    |------|--------|
    |2016企业版（基础版）|2016企业版（高可用版）|
    |2012企业版单机（基础版）|2016企业版（高可用版）|
    |2012企业版（高可用版）|
    |2016WEB（基础版）|2016企业版（高可用版）|
    |2016标准版（高可用版）|
    |2012WEB（基础版）|2016企业版（高可用版）|
    |2016标准版（高可用版）|
    |2012企业版（高可用版）|
    |2012标准版（高可用版）|


## 操作步骤

1.  登录[RDS管理控制台](https://rds.console.aliyun.com/)。
2.  在左侧单击**实例列表**，然后在上方选择实例所在地域。

    ![选择地域](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3074469951/p36543.png)

3.  找到目标实例，单击实例ID。
4.  在**基本信息**页面，单击**升级版本**，在弹出的对话框中单击**确定**。

    ![升级版本新](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/4776237061/p188639.png)

    ![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/7303729951/p53145.png)

5.  在**升级引擎版本**页面修改配置，说明如下。

    |参数名称|说明|
    |----|--|
    |**升级到版本**|选择不同的目标版本，对应的**系列**、**存储类型**、**规格**选项也会变化。|
    |**系列**|**高可用版**：一主一备的经典高可用架构，各方面表现均衡。|
    |**存储类型**|    -   **SSD云盘**：基于分布式存储架构的弹性块存储设备。将数据存储于SSD云盘，即实现了计算与存储分离。
    -   **ESSD云盘**：增强型SSD云盘，是阿里云全新推出的超高性能云盘产品。ESSD云盘基于新一代分布式块存储架构，结合25GE网络和RDMA技术，为您提供单盘高达100万的随机读写能力和更低的单路时延能力。 |
    |**可用区**|目标可用区，支持选择多可用区。|
    |**规格**|每种规格都有对应的CPU核数、内存、最大连接数和最大IOPS。详情请参见[主实例规格列表](/cn.zh-CN/云数据库 RDS 简介/产品规格/主实例规格列表.md)。|
    |**网络类型**|无法选择**经典网络**，必须指定专有网络信息：     -   原实例为经典网络：可以修改专有网络和交换机。
    -   原实例为专有网络或混访模式：不可以修改专有网络，只可以修改交换机。 |
    |**交换机**|目标交换机。迁移至多可用区时需要选择多个目标交换机。 **说明：**

    -   原实例为专有网络或混访模式时，不可以修改专有网络，只可以修改交换机。可选择的交换机由**可用区**和专有网络决定。
    -   如果选择的是默认VPC，目标交换机支持默认交换机和非默认交换机。
    -   如果选择的是非默认VPC，目标交换机只支持非默认交换机。 |
    |**切换时间**|    -   **数据迁移结束后立即切换**：立刻进行迁移并切换。
    -   **可维护时间内进行切换**：立刻进行迁移并在可维护时间段内进行切换。 |

    ![升级配置](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/8303729951/p41116.png)

6.  勾选服务条款，单击**确认变更**。

## 连接地址变更规则

升级后新实例都处于专有网络，根据原实例的网络类型，新实例的数据库连接地址变更规则如下：

|原实例网络类型|变更规则|
|-------|----|
|经典网络|新实例为混访模式： -   经典网络连接地址为原实例的网络连接，无过期时间。
-   根据升级时选择的专有网络信息生成一个专有网络连接地址。 |
|专有网络|新实例仍然为专有网络，连接地址不变，虚拟IP（VIP）可能会发生变化。|
|混访模式|新实例仍然为混访模式，且专有网络和经典网络的连接地址不变，经典网络连接地址的过期时间与之前保持一致。|

